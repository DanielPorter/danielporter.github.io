<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Course Catalog - Community College Hub</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <nav class="navbar">
      <div class="nav-container">
        <a href="index.html" class="nav-logo">Community Hub</a>
        <ul class="nav-menu">
          <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
          <li class="nav-item"><a href="about.html" class="nav-link">About</a></li>
          <li class="nav-item"><a href="course-catalog.html" class="nav-link active">Course Catalog</a></li>
          <li class="nav-item"><a href="course-planner.html" class="nav-link">Course Planner</a></li>
        </ul>
      </div>
    </nav>
  </header>
  <main>
    <section class="content">
      <h1>Course Catalog</h1>
      <!-- Optional search bar at the top -->
      <div class="search-container">
        <input type="text" id="searchInput" placeholder="Search courses by name or code">
      </div>
      <div id="courseList" class="course-list">
        <!-- Course cards will be inserted here -->
      </div>
    </section>
  </main>
  
  <!-- Pagination control fixed above the footer -->
  <div id="pagination" class="pagination"></div>
  
  <footer>
    <p>&copy; 2025 Community College Hub</p>
  </footer>
  
  <script>
    let courses = [];
    let filteredCourses = [];
    let currentPage = 1;
    const coursesPerPage = 30;
    
    // Fetch course data from courses.json (assumed to be pre-populated with your extracted course info)
    fetch('courses.json')
      .then(response => response.json())
      .then(data => {
        courses = data;
        filteredCourses = courses;
        displayCourses();
        setupPagination();
      });
    
    function displayCourses() {
      const courseList = document.getElementById('courseList');
      courseList.innerHTML = '';
      const startIndex = (currentPage - 1) * coursesPerPage;
      const endIndex = startIndex + coursesPerPage;
      const coursesToDisplay = filteredCourses.slice(startIndex, endIndex);
      
      coursesToDisplay.forEach(course => {
        const card = document.createElement('div');
        card.className = 'course-card';
        
        // Card header
        const header = document.createElement('div');
        header.className = 'card-header';
        header.innerHTML = `<h3>${course.code}: ${course.title}</h3><p>${course.department}</p>`;
        card.appendChild(header);
        
        // Hidden card body with additional details
        const body = document.createElement('div');
        body.className = 'card-body';
        body.innerHTML = `
          <p>${course.description}</p>
          ${course.prerequisites && course.prerequisites.length ? `<p><strong>Prerequisites:</strong> ${course.prerequisites.join(', ')}</p>` : ''}
          ${course.equivalencies && Object.keys(course.equivalencies).length ? `<p><strong>Equivalencies:</strong> ${Object.entries(course.equivalencies).map(([key, value]) => key.toUpperCase() + ': ' + value).join(', ')}</p>` : ''}
        `;
        card.appendChild(body);
        
        // Toggle card expansion on click
        card.addEventListener('click', function() {
          card.classList.toggle('expanded');
          body.style.display = card.classList.contains('expanded') ? 'block' : 'none';
        });
        
        courseList.appendChild(card);
      });
    }
    
    function setupPagination() {
      const pagination = document.getElementById('pagination');
      pagination.innerHTML = '';
      const totalPages = Math.ceil(filteredCourses.length / coursesPerPage);
      if(totalPages <= 1) return;
      
      for(let i = 1; i <= totalPages; i++) {
        const pageBtn = document.createElement('button');
        pageBtn.textContent = i;
        pageBtn.className = 'page-btn';
        if(i === currentPage) {
          pageBtn.classList.add('active');
        }
        pageBtn.addEventListener('click', () => {
          currentPage = i;
          displayCourses();
          setupPagination();
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        pagination.appendChild(pageBtn);
      }
    }
    
    // Search filtering
    document.getElementById('searchInput').addEventListener('input', function() {
      const query = this.value.toLowerCase();
      filteredCourses = courses.filter(course =>
        course.title.toLowerCase().includes(query) ||
        course.code.toLowerCase().includes(query)
      );
      currentPage = 1;
      displayCourses();
      setupPagination();
    });
  </script>
</body>
</html>
